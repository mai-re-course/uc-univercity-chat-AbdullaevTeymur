
# Регистрация пользователя

**Акторы:** 

- Пользователь
- Система
- Бэкенд

**Цель:** Как пользователь, я хочу зарегистрироваться чтобы в дальнейшем авторизоваться в чате

**Предусловия:** Пользователь запускает клиент чата

**Сценарий:**

1. Пользователь начинает регистрацию, нажав на кнопку регистрация.
2. Система запрашивает способ регистрации (по номеру телефона , Email адресу).
3. Пользователь выбирает способ регистрации по номеру телефона, нажав на кнопку.
4. Пользователь вводит номер телефона.
5. Система отсылает введенный номер на бэкенд.
6. Бэкенд отсылает sms сообщение с регистрационным кодом на введенный номер.
7. Система запрашивает регистрационный код.
8. Пользователь вводит регистрационный код.
9. Система отсылает введенный код на бэкенд для проверки на сходимость.
10. Бэкенд отсылает подтверждение системе.
11. Система запрашивает данные ( ФИО, Должность, учебную группу(для должности студент), дату рождения, пароль, подтверждение пароля, согласие на обработку персональных данных)
12. Пользователь вводит данные ,запрашиваемые системой
13. Система проверяет данные на соответствие требованиям шаблона
14. Система отправляет данные на бэкенд
15. Бэкенд добавляет данные о пользователе в базу данных 
{Успешная регистрация}
16. Бекенд возвращает ответ успешной регистрации
17. Система выводит на экран запись об успешной регистрации


**Результат:**

- В базу данных добавлен новый пользователь

**Исключения:**

5. Если пользователь ввел уже зарегистрированный Email или номер телефона, система сообщает об этом и происходит возврат на шаг 4
10. Если код не соответствует отправленному, то система сообщает об этом и происходит возврат на шаг 7 
13. Если введенные данные не соответствуют шаблону, то система сообщает это, и подчеркивает красной волнистой линий, те данные в которых получилось отличие, происходит возврат к шагу 11

**Альтернативный сценарий:** 

3. Пользователь выбирает способ регистрации по Email адресу , нажав на кнопку.
4. Пользователь вводит Email адрес.
5. Система отсылает введенный Email адрес на бэкенд.
6. Бэкенд отсылаетсообщение с регистрационным кодом на введенный Email адрес.
7. Система запрашивает регистрационный код.
8. Возврат на шаг 8 основного сценария.








# Авторизация пользователя

**Акторы:** 

- Пользователь
- Система
- Бэкенд


**Цель:** Как пользователь, я хочу авторизоваться чтобы использовать функции чата

**Предусловия:** Пользователь регистрируется в системе

**Сценарий:**
1. Пользователь нажимает на кнопку авторизация.
2. Система Запрашивает логин и пароль Пользователя.
3. Пользователь вводит логин и пароль.
4. Пользователь Нажимает кнопку «ОК».
5. Система отпавляет логин и пароль на бэкенд для проверки на наличие в базе данных.
6. Бэкенд отсылает подтверждение и данные о пользователе системе.
7. Система сообщает об успешной авторизации и отображает меню чатов пользователя.


**Исключения:**

Логина нет в базе данных 
 
6.1.1. Если логина нет в базе данных,  Бэкенд отсылает системе сигнал о том, что пользователь с таким логином не зарегестрирован.

6.1.2. Система выводит на экран сообщение о том, что пользователь с таким логином не зарегестрирован, происходит возврат к шагу 2 .

Пароль не верен

6.2.1. Если пароль не верен, то Бэкенд отсылает системе сигнал об этом.

6.2.2. Система выводит на экран сообщение о том, что пароль не верен.

6.2.3. Система запрашивает пароль пользователя,данные в поле логин остаются прежними.

6.2.4. Пользователь вводит пароль, происходит возврат к шагу 4 .

Забыли пароль 

6.2.4.1. Пользоваьтель нажимает кнопку забыл пароль.

6.2.4.2. Система отправляет сигнал на бэкенд о том, что пользователь забыл пароль.

6.2.4.3. Бэкенд отпраляет проверочный код на логин пользователя.

6.2.4.4. Система запрашивает проверочный код.

6.2.4.5. Пользователь вводит проверочный код.

6.2.4.6. Система отсылает код на бэкенд на проверку.

6.2.4.7. Бэкенд отсылает сигнал о совпадении кода.

6.2.4.8. Система запрашивает новый пароль у пользователя.

6.2.4.9. Пользователь вводит новый пароль.

6.2.4.10. Система отправляет новый пароль на бэкенд.

6.2.4.11. Бэкенд изменяет пароль в базе данных .

6.2.4.12. Система сообщает об успешном изменении пароля, происходит возврат к шагу 2.




**Результат:**

- Пользователь получил доступ к функциям чата.





































# Название сценария отглагольным существительным

**Акторы:** 

- Актор обычно основной пользователь
- Используемые системы тоже акторы

**Цель:** цель, которую хочет достичь пользователь. Хорошо описывается в формате user story

**Предусловия:** условия, без которых не может начаться сценарий.

**Сценарий:**

1. Нумерованный список шагов.
2. Каждый шаг описан по формуле: «актор действие дополнение». Пример ниже.
3. Пользователь создаёт персональный чат, нажав на кнопку создания чата.
4. В шагах можно делать отсылки на альтернативные ветки или другие сценарии. Детально альтернативы стоит расписывать отдельно, здесь дать только отсылку. Пример ниже.

    Если пользователь выбрал больше чем одного, начинается сценарий [Создание группового чата].

{Успешное создание чата}

5. Бекенд возвращает ответ успешного создания чата.

**Результат:**

- Список значимых результатов сценария.
- В базу данных добавлен новый чат.

**Исключения:**

1. Список ошибок, которые могут возникнуть во время сценария, с номером соответствующего шага, в котором возникает ошибка. Пример ниже.
3. Если других пользователей нет показывается ошибка.

**Альтернативный сценарий:** 

4. Начало с того шага основного сценария, с которого начинается альтернативный.
5. Шаги альтернативного сценария. В конце обязательно отсылка с возврат на нужный шаг основного сценария, либо явное завершение сценария целиком.
6. Возврат на шаг 3 основного сценария.




